<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="__ADMIN__lib/html5.js"></script>
<script type="text/javascript" src="__ADMIN__lib/respond.min.js"></script>
<script type="text/javascript" src="__ADMIN__lib/PIE_IE678.js"></script>
<![endif]-->
<link href="__ADMIN__css/H-ui.min.css" rel="stylesheet" type="text/css" />
<link href="__ADMIN__css/H-ui.admin.css" rel="stylesheet" type="text/css" />
<link href="__ADMIN__css/style.css" rel="stylesheet" type="text/css" />
<link href="__ADMIN__lib/Hui-iconfont/1.0.1/iconfont.css" rel="stylesheet" type="text/css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<style type="text/css">
	a{
		text-decoration:none;
	}
	.pageos{
		border: 1px solid;
		border-radius: 20px;
		padding-left: 6px;
		padding-right: 6px;
		margin: 5px;
		
	}
	.pageos:hover{
		background-color: white;
		color: #C8332F;
		
	}
	.pageon{
		border: 1px solid #C7241D;
		background-color: white;
		color: #C8332F;
		border-radius: 20px;
		padding-left: 5px;
		padding-right: 5px;
		margin: 5px;	
	}	
	.overbtn:hover{
		background-color: #5a98de;
	}
	.sigleOrder{
		background-color: white;
		position: relative;
		left: 135px;
		top: -40px;
		z-index:1;
	}
	.center{
		text-align: center;
	}
	.mr20{
		margin-right: 20px;
	}
	.radius5{
		border-radius: 5px;
	}
	/*排序表格*/
	.example{margin:1%}
	table{font-size:1em;border-collapse:collapse;margin:0 auto}
	table,td,th{border:1px solid #999;padding:8px 16px;text-align:left}
	table.ex-2{min-width:100px}
	th{background:#f4f4f4;cursor:pointer}
	th.sorted,th:hover{background:#d4d4d4}
	th.no-sort,th.no-sort:hover{background:#f4f4f4;cursor:not-allowed}
	th.sorted.ascending:after{content:"  \2191"}
	th.sorted.descending:after{content:" \2193"}
	.disabled{opacity:.5}	
</style>
<title> 供应商订单监控</title>
</head>
<body>
<nav class="breadcrumb" style="position :fixed; width: 100%;">
	<i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 供应商订单管理 <span class="c-gray en">&gt;</span> <span>订单订单监控</span> 
	<a class="btn btn-success radius r mr-20" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;刷新本页</i></a>
</nav>
<div style="padding-top: 35px;">
	<div class="pd-20" style="height: 150px;">
		<div class="Huialert Huialert-info"><i class="icon-remove"></i>供应商代发订单监控</div>
    		<div class="col-sm-10 col-offset-1">
		        <div class="panel panel-danger  col-sm-2 mr20 radius5">
			    	<div class="panel-header">红色预警订单</div>
			    	<div class="panel-body center">
			    		<a href="javascript:void(0)" onclick="article_edit('订单监控详情-红色预警订单','{:U('SupplierOrder/monitorinOrderList',array('warningType'=>'redWaring'))}','10001')" >
				    		<span class="badge badge-danger radius">{$redWaringCount}</span>
			    		</a>
			    	</div>
		   		</div> 
		        <div class="panel panel-warning  col-sm-2 mr20 radius5">
			    	<div class="panel-header">黄色预警订单</div>
			    	<div class="panel-body center">
			    		<a href="javascript:void(0)" onclick="article_edit('订单监控详情-黄色预警订单','{:U('SupplierOrder/monitorinOrderList',array('warningType'=>'yellowWaring'))}','10001')" >
			    			<span class="badge badge-warning  radius">{$yellowWarningCount}</span>
			    		</a>
			    	</div>
		   		</div> 
		        <div class="panel panel-secondary  col-sm-2 mr20 radius5">
			    	<div class="panel-header">正常订单</div>
			    	<div class="panel-body center">
			    		<a href="javascript:void(0)" onclick="article_edit('订单监控详情-正常订单','{:U('SupplierOrder/monitorinOrderList',array('warningType'=>'normal'))}','10001')" >
			    			<span class="badge badge-secondary radius">{$normalCount}</span>
			    		</a>
			    		
			    	</div>
		   		</div> 
		        <div class="panel panel-primary col-sm-2 mr20 radius5">
			    	<div class="panel-header">待发货订单</div>
			    	<div class="panel-body center">
			    		<a href="javascript:void(0)" onclick="article_edit('订单监控详情-待发货订单','{:U('SupplierOrder/monitorinOrderList',array('warningType'=>'waitsend'))}','10001')" >
			    			<span class="badge badge-primary radius">{$waitSendCount}</span>
			    		</a>
			    		
			    	</div>
		   		</div> 
		        <div class="panel panel-success col-sm-2 mr20 radius5">
			    	<div class="panel-header">已发货订单</div>
			    	<div class="panel-body center">
			    		<a href="javascript:void(0)" onclick="article_edit('订单监控详情-已发货订单','{:U('SupplierOrder/monitorinOrderList',array('warningType'=>'sended'))}','10001')" >
			    			<span class="badge badge-success radius">{$sendedCount}</span>
			    		</a>
			    		
			    	</div>
		   		</div> 			   		
    		</div>
	    </div>		
	</div>
	<div class="cl pd-5 bg-1 bk-gray" style="padding: 20px 20px 0px 20px;"> 
		<div class="Huialert Huialert-success"><i class="icon-remove"></i>
			代发订单的供应商分布
			<span class="r">共有数据：<strong class="label label-success radius">{$supplierNum}</strong> 条</span> 
		</div>
	</div>
	<div style="float: right;margin-bottom: 20px;margin-right: 20px;" >
		<form action="__SELF__" method="get" id="serach">
			<input  type="hidden" class="tools-input" id="execlType" name="execlType" value="" >							
			<div class="product-tools">
				<label>供应商：</label>
				<label>
				<input type="text"  value="" id="supKeyword"  placeholder="供应商关键字再选择" style="width:140px" class="input-text"  >						
				<select name="supplierId" class="select-box" style="width:180px;" id="suppliers">
					<option value="0">全部</option>
					<volist name="supplierAll" id="supplier">
						<option value="{$supplier.supplier_id}"  <eq name="search.supplierId" value="$supplier.supplier_id">selected="selected"</eq> >{$supplier.company_name}</option>
					</volist>
				</select>	
				<button type="submit" class="btn btn-success radius" ><i  class="Hui-iconfont">&#xe665;</i> 搜索</button>					
			</div>
			</form>			
	</div>	
<div class="example ex-1 mt-10">
  <table>
    <thead>
      <tr>
		<th align="center" width="5%" title="供应商ID" class="number" >ID</th>
		<th align="center"  width="25%">供应商名称</th>
		<th align="center" width="10%" class="number" >红色预警订单</th>
		<th align="center" width="10%" class="number" >黄色预警订单</th>
		<th align="center" width="10%" class="number" >正常订单</th>
		<th align="center" width="12%" class="number" >待发货订单</th>
		<th align="center" width="10%" class="number" >已发货订单</th>
		<th align="center" width="10%" class="number" >代发预警比例</th>
		<th align="center" width="8%" class="no-sort" >操作</th>	        
      </tr>
    </thead>
    <tbody>
	   	<volist name="supplierList" id="list" >
				<tr>
					<td class="center">
						{$list['supplier_id']}
					</td>
					<td class="center" data-sort-value="{$key}" >
						{$list['company_name']}
					</td> 
					<td class="center" style="color:#dd514c;">
		    				{:count($redWaringTrade[$list['supplier_id']])}
					</td>
					<td class="center" style="color: #f37b1d;">
		    				{:count($yellowWarningTrade[$list['supplier_id']])}
						
					</td>
					<td class="center">
		    				{:count($normalTrade[$list['supplier_id']])}
					</td>
					<td class="center">
	    				{:count($waitSendTrade[$list['supplier_id']])}
					</td>
					<td class="center">
		    				{:count($sendedTrade[$list['supplier_id']])}
					</td>
					<td class="center">
						{:getPercentRate(count($redWarningTrade[$list['supplier_id']]),count($yellowWarningTrade[$list['supplier_id']]),count($waitSendTrade[$list['supplier_id']]))}
					</td>
					<td class="center">
						<a href="javascript:void(0)" onclick="article_edit('订单监控详情-{$list['company_name']}','{:U('SupplierOrder/monitorinOrderList',array('supplierId'=>$list['supplier_id']))}','10001')" >
							<span class="label label-success radius overbtn">查看详情</span>
						</a>
					</td>
	        	</tr>
			</volist> 
    </tbody>
  </table>
	<div class="page" style="text-align: center; padding: 20px 0px 50px 0px;">{$pageStr}</div>
  
</div>	
	
	
		
	</div>
</div>
<script type="text/javascript" src="__ADMIN__lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="__ADMIN__lib/layer/1.9.3/layer.js"></script> 
<script type="text/javascript" src="__ADMIN__lib/My97DatePicker/WdatePicker.js"></script> 
<script type="text/javascript" src="__ADMIN__lib/datatables/1.10.0/jquery.dataTables.min.js"></script> 
<script type="text/javascript" src="__ADMIN__js/H-ui.js"></script> 
<script type="text/javascript" src="__ADMIN__js/H-ui.admin.js"></script> 
<!--//	可排序表格-->
<script src="__ADMIN__js/jquery-latest.min.js"></script> 
<script src="__ADMIN__js/jquery.tablesort.min.js"></script> 
<!--//	可排序表格-->
	
<script type="text/javascript">
//	可排序表格
$(function(){
var table = $('<table class="ex-2"></table>');
table.append('<thead><tr><th class="number">Number</th></tr></thead>');
var tbody = $('<tbody></tbody>');

for(var i = 0; i<20; i++) {
	tbody.append('<tr><td>' + Math.floor(Math.random() * 100) + '</td></tr>');
}
table.append(tbody);
$('.example.ex-2').append(table);

$('table').tablesort().data('tablesort');

$('thead th.number').data('sortBy', function(th, td, sorter) {
	return parseInt(td.text(), 10);
});

//Sorting indicator example
$('table.ex-2').on('tablesort:start', function(event, tablesort) {
	$('table.ex-2 tbody').addClass("disabled");
	$('.ex-2 th.number').removeClass("sorted").text('Sorting..');
});

$('table.ex-2').on('tablesort:complete', function(event, tablesort) {
	$('table.ex-2 tbody').removeClass("disabled");
	$('.ex-2 th.number').text('Number');
});
});
//	可排序表格
	//搜索
	function serach(){
		$("#execlType").val("");
		$("#serach").submit();
		
	}	
	//导出execl
	function exportExcel(){
		$("#execlType").val("exportExcel");
		$("#serach").submit();
		
	}
	/*用户-编辑*/
	function member_edit(title,url,id,w,h){
		layer_show(title,url,w,h);
	}	
	/*资讯-编辑*/
	function article_edit(title,url,id,w,h){
		var index = layer.open({
			type: 2,
			title: title,
			content: url
		});
		layer.full(index);
	}
//供应商关键字选择供应商
	$("#supKeyword").on('blur',function(){
	    $( '#suppliers' ).empty();
	    $( '#suppliers' ).append('<option value="0">全部</option>');
	    var urls = "{:U('Home/SupplierOrder/getSupplierOption')}" ;
		var keywords=$("#supKeyword").val().trim();
		$.post(urls,{keyword:keywords},function(data){
			$("#suppliers").append(data);
		});
	});
</script>
</body>
</html>