<!--
<head>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/theme.css">
    <link rel="stylesheet" href="./css/layout.css">
</head>
-->





<script type="text/javascript">
$('.head').hide();
$('#nav').hide();
</script>
<style type="text/css">
.head-ext { width:100%; background-color: #a12124;}
.head-ext .nav {width: 1190px;height: 100px;margin: 0 auto;}
.head-ext .img {padding-top: 28px;padding-left: 24px; float: left;}
.head-ext .p1 {float: left;font-size: 23px;color: white;margin: 0px 10px 0px 20px;    height: 35px;   padding-top: 16px;line-height: 44px;} 
.head-ext .p1 span {font-size: 13px;  background: white;   color: #A12124;   padding: 0px 5px;   border-radius: 5px;   position: relative;   top: -20px;}  
.head-ext .right {float: right;}
.head-ext .right .p {
color: white;
font-family: 微软雅黑;
font-size: 16px;
text-align: right;
margin: 0px;
padding: 0px;
top: 16px;
position: relative;
line-height: 39px;
  }
  .head-ext .right .img {margin-top: -14px;}
</style>
<div class="head-ext">
  <div class="nav">
      <img class="img" src="images/activation/index_logo.png">
      <p class="p1">企业专属福利专家</br><span >已认证</span></p>
	   
    <div class="right">
        <p class="p">一企一舍咨询热线</p>
        <img class="img" src="images/activation/index_phone.png">
      </div>
    </div>
</div>


<style>
.content {width:1190px;margin:0 auto; height:680px;}
.content .content-1 {text-align: center;   padding-top: 70px;   width: 1190px;   margin: 0 auto;}
.content .content-2 {width: 1190px;   height: 500px;}
.content .content-2 .nav{    width: 844px;   margin: 0 auto;height: 500px; line-height: 3;}
.content .content-2 .nav .div1 {height: 54px;   margin-top: 82px;}
.content .content-2 .nav .div1 .p1{float: left;   padding-left: 200px;     font-size: 16px;}
.content .content-2 .nav .div1 .p2{float: left;margin-left: 12px;}
.content .content-2 .nav .div1 .span{color: red;}
.content .content-2 .nav .div1 .input{height: 31px;   width: 332px;   margin-top: 7px;}
.content .content-2 .nav .div2 {height: 54px;   margin-top: 25px;}
.content .content-2 .nav .div2 .p1{    float: left;  padding-left: 200px;   font-size: 16px;}
.content .content-2 .nav .div2 .p2{float: left;margin-left: 12px;}
.content .content-2 .nav .div2 .span{    color: red;}
.content .content-2 .nav .div2 .input{height: 31px;   width: 330px;   margin-top: 7px;}
.content .content-2 .nav .div2 .div{width: 117px;   float: left;   border: 1px solid #CC3535;   margin-top: 7px;   height: 29px; margin-left: 13px;}
.content .content-2 .nav .div2 .p3{background: #CC3535;   width: 29px;   height: 29px;   text-align: center;   margin-left: 88px;}
.content .content-2 .nav .div2 .img{margin-top: 4px;}
.content .content-2 .nav .div3 {height: 54px;   margin-top: 25px;}
.content .content-2 .nav .div3 .p1{ float: left;  padding-left: 200px;   font-size: 16px;}
.content .content-2 .nav .div3 .p2{    float: left;margin-left: 12px;}
.content .content-2 .nav .div3 .p3{float:left;     margin-left: 14px;   margin-top: 6px;}
.content .content-2 .nav .div3 .span{color: red;}
.content .content-2 .nav .div3 .input{height: 31px;   width: 198px;   margin-top: 7px;}
.content .content-2 .nav .div3 .button{width: 118px;   height: 33px;   background: #CC3535;   color: white;   border: none;}
.content .content-2 .nav .div4 {text-align: center;   width: 844px;}
.content .content-2 .nav .div4 .input{}
.content .content-2 .nav .div5 {text-align: center;   width: 844px; margin-top: 63px;}
.content .content-2 .nav .div5 .button{width: 139px;   height: 36px;   font-size: 17px;   color: white;   background: #CC3535;   border: none; margin-top: 30px;}

</style>

<div class="content">
	<div class="content-1">
		<img class="" src="images/activation/theme/img2.png" />
	</div>
	
	<div class="content-2">
		<div class="nav">
			<div class="div1">
				<p class="p1"><span class="span">*</span>设置登录密码：</p>
				<p class="p2"><input type="password" class="input" /></br>
					<span style="    color: grey;font-size: 15px;"> 密码必须由六位以上数字,字母的组合</span>
				</p>
			</div>
			<div class="div2">
				<p class="p1"><span class="span">*</span>确认登录密码：</p>
				<p class="p2"><input type="password" class="input" />
					</br>
					<span style="    color: grey;font-size: 15px;">请再输入密码</span>
				</p>
				
			</div>
			
			<div class="div5" >
				<button class="button">下一步</button>
			</div>			
		</div>
	</div>
	
</div>

<script type="text/javascript" src="http://120.76.102.64/app/topc/statics/js/jquery.url.js"></script>
<script type="text/javascript" src="http://120.76.102.64/app/topc/statics/js/ls.api.web.js"></script>
<script type="text/javascript" src="http://120.76.102.64/app/topc/statics/js/crypto.js"></script>
<script type="text/javascript" src="http://120.76.102.64/app/topc/statics/js/jquery.cookie.js"></script>
<script type="text/javascript">
$(document).ready(function() {

    init_public_key();

	$('.content .div5 .button').bind({

		click: function() {

			var _phone = jQuery.url.param("phone") == null ? "" : jQuery.url.param("phone");

			var _passwd = $('.content .div1 .input').val();
			var _confirm_passwd = $('.content .div2 .input').val();

			if (null == _phone || _phone.trim().length <= 0) {
				alert('请输入手机号');
				return;
			}

			if (null == _passwd || _passwd.trim().length <= 0) {
				alert('请输入登录密码');
				return;
			}

			if (null == _confirm_passwd || _confirm_passwd.trim().length <= 0) {
				alert('请输入确认登录密码');
				return;
			}

			if (_passwd != _confirm_passwd) {
				alert('两次输入的密码不一致');
				return;
			}

			// Web.Method.ajax("mall/register",{
			Web.Method.ajax("mall/activateUser",{
	            safe:true,
	            data:{
	              // login_name:_phone,
	              login_pwd:_passwd,
	              phone_num:_phone
	            },
	            success:function(data){

					console.log(data);

					// location.href = '<{url action=topc_ctl_passport@activationSuccess}>';
					// 注册商城用户
					var ajaxaUrl = '<{url action=topc_ctl_passport@createWithActivation}>?login_name=' + _phone + '&login_pwd=' + _passwd + '&phone_num=' + _phone;
					console.log(ajaxaUrl);

					$.ajax({
						type: "GET",
						url: ajaxaUrl,
						/*
						data: {
							'login_name': _phone,
							'login_pwd': _passwd,
							'phone_num': _phone
						},
						*/
						beforeSend: function(){
							console.log("正在加载中……");
						},
						success: function(data){
							
							console.log(data);
							if(data != null) {
								
								// var jsonData = eval('(' + data + ')');
								var jsonData = data;
								var result = jsonData['result'];
								
								switch(result) {
									
								case 0:{
									location.href = '<{url action=topc_ctl_passport@activationSuccess}>';
								}
								case 1:{
									location.href = '<{url action=topc_ctl_passport@activationSuccess}>';
								}
								default: {
									alert(jsonData['msg']);
								}
								}
							}	
							else {
								alert('响应失败！');
							}
						},
						complete: function(){
							console.log("加载完成!");
						}
					});
	            },
	            fail:function(data){
	              alert(data.msg);
	            }
	      	});
		}
	});
});
</script>